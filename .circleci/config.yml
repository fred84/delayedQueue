version: 2.1

jobs:
  check:
    docker:
      - image: gradle:8.12-jdk21

      - image: redis:4-alpine
        name: redis

      - image: shopify/toxiproxy:latest
        name: toxiproxy

    environment:
      TOXIPROXY_IP: toxyproxy

    steps:
      - checkout
      - run:
          name: "check"
          command: "gradle check"

workflows:
  say-hello-workflow:
    jobs:
      - check
